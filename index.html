<!DOCTYPE html>
          beers.splice(i, 1);
        }
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateHeadNod();
      drawPlayer();
      drawBeers();
      requestAnimationFrame(animate);
    }

    setInterval(createBeer, 1000); // новая бутылка каждую секунду
    animate();

    // Управление кнопками
    document.getElementById("leftBtn").addEventListener("mousedown", () => {
      player.x -= player.speed;
      if (player.x < player.width / 2) player.x = player.width / 2;
    });

    document.getElementById("rightBtn").addEventListener("mousedown", () => {
      player.x += player.speed;
      if (player.x > canvas.width - player.width / 2) player.x = canvas.width - player.width / 2;
    });

    // Музыка
    bgMusic.volume = 0.2;
    bgMusic.play().catch(() => {
      alert("Нажмите чтобы запустить музыку.");
    });

    // Показываем реплики
    function showSpeechBubble(text) {
      speechBubble.textContent = text;
      speechBubble.style.opacity = 1;
      setTimeout(() => {
        speechBubble.style.opacity = 0;
      }, 2000);
    }

    // Сохраняем рекорд
    setInterval(() => {
      if (score > record) {
        record = score;
        localStorage.setItem("vanoRecord", record);
        scoreDisplay.textContent = `Выпито бутылок: ${score} | Рекорд: ${record}`;
      }
    }, 1000);
  </script>
</body>
</html>