<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í–∞–Ω–æ –ª–æ–≤–∏—Ç –ø–∏–≤–æ –Ω–∞ —Å–≤–∞–¥—å–±–µ!</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
      background-image: url('https://images.unsplash.com/photo-1587502348183-933d09d1e6cc?auto=format&fit=crop&w=1950&q=80');
      background-size: cover;
      background-position: center;
    }

    h1 {
      text-align: center;
      padding: 10px;
      color: #fff;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
      font-size: 1.2em;
    }

    canvas {
      display: block;
      width: 100vw;
      height: 70vh;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 18px;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 8px 16px;
      border-radius: 10px;
      z-index: 10;
    }

    #controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 20px;
      z-index: 10;
    }

    .btn {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ffeb3b;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #speechBubble {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 18px;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      z-index: 20;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>–í–∞–Ω–æ –ª–æ–≤–∏—Ç –ø–∏–≤–æ –Ω–∞ —Å–≤–∞–¥—å–±–µ! ü•Ç</h1>
  <div id="score">–í—ã–ø–∏—Ç–æ –±—É—Ç—ã–ª–æ–∫: 0 | –†–µ–∫–æ—Ä–¥: <span id="record">0</span></div>
  <canvas id="gameCanvas"></canvas>

  <div id="speechBubble"></div>

  <div id="controls">
    <button class="btn" id="leftBtn">‚¨ÖÔ∏è –í–ª–µ–≤–æ</button>
    <button class="btn" id="rightBtn">–í–ø—Ä–∞–≤–æ ‚û°Ô∏è</button>
  </div>

  <audio id="burpSound" src="https://www.soundjay.com/human/sounds/burping-04.mp3"></audio>
  <audio id="bgMusic" loop>
    <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Creative_Commons/Boxcat_Games/BoxCat_Games_-_04_-_Power_Up.mp3" type="audio/mpeg">
  </audio>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight * 0.7;

    const player = {
      x: canvas.width / 2,
      y: canvas.height - 100,
      width: 60,
      height: 100,
      mouthY: canvas.height - 60,
      mouthRadius: 15,
      headOscillation: 0,
      speed: 8
    };

    let beers = [];
    let score = 0;
    let record = localStorage.getItem("vanoRecord") || 0;

    const scoreDisplay = document.getElementById("score").querySelectorAll("span")[0];
    const burpSound = document.getElementById("burpSound");
    const bgMusic = document.getElementById("bgMusic");
    const speechBubble = document.getElementById("speechBubble");

    const phrases = [
      "–û—Ö, –µ—â—ë –æ–¥–Ω—É!",
      "–≠—Ç–æ –∫–∞–∫ –≤–∏–Ω–æ, –Ω–æ –ø–∏–≤–æ!",
      "–ë—É—Å—ã —Ä–∞–∑–≤–µ—à—É –ø–æ—Å–ª–µ –ø—è—Ç–æ–π!",
      "–ù—É —Ç—ã –∏ –ª–µ—Ç–∏—à—å!",
      "–ü—Ä–∏–ª–µ—Ç–µ–ª–æ –ø—Ä—è–º–æ –≤ —Ä–æ—Ç!"
    ];

    function createBeer() {
      const speed = Math.random() * 2 + 2;
      beers.push({
        x: Math.random() * canvas.width,
        y: -30,
        radius: 10,
        speed: speed,
        color: "#ffcc00"
      });
    }

    function drawPlayer() {
      // –¢–µ–ª–æ
      ctx.fillStyle = "#4a148c";
      ctx.fillRect(player.x - player.width / 2, player.y, player.width, player.height);

      // –ì–æ–ª–æ–≤–∞ —Å –∫–∏–≤–∫–æ–º
      ctx.save();
      ctx.translate(player.x, player.y - 10);
      ctx.rotate(player.headOscillation);
      ctx.beginPath();
      ctx.arc(0, 0, 30, 0, Math.PI * 2);
      ctx.fillStyle = "#ffebc2";
      ctx.fill();

      // –†–æ—Ç
      ctx.beginPath();
      ctx.arc(0, 30, player.mouthRadius, 0, Math.PI, false);
      ctx.fillStyle = "red";
      ctx.fill();
      ctx.restore();
    }

    function updateHeadNod() {
      const time = Date.now() * 0.002;
      player.headOscillation = Math.sin(time) * 0.05;
    }

    function drawBeers() {
      for (let i = beers.length - 1; i >= 0; i--) {
        const b = beers[i];
        ctx.beginPath();
        ctx.rect(b.x - b.radius, b.y, b.radius * 2, b.radius * 3);
        ctx.fillStyle = b.color;
        ctx.fill();

        b.y += b.speed;

        const dy = b.y + b.radius * 3 - (player.y - 10 + 30);
        const dx = b.x - player.x;
        if (dy < 10 && Math.abs(dx) < player.mouthRadius) {
          beers.splice(i, 1);
          score++;
          scoreDisplay.textContent = `–í—ã–ø–∏—Ç–æ –±—É—Ç—ã–ª–æ–∫: ${score} | –†–µ–∫–æ—Ä–¥: ${record}`;
          burpSound.currentTime = 0;
          try {
            burpSound.play();
            showSpeechBubble(phrases[Math.floor(Math.random() * phrases.length)]);
          } catch {}
          continue;
        }

        if (b.y > canvas.height) {
          beers.splice(i, 1);
        }
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateHeadNod();
      drawPlayer();
      drawBeers();
      requestAnimationFrame(animate);
    }

    setInterval(createBeer, 1000); // –Ω–æ–≤–∞—è –±—É—Ç—ã–ª–∫–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    animate();

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏
    document.getElementById("leftBtn").addEventListener("mousedown", () => {
      player.x -= player.speed;
      if (player.x < player.width / 2) player.x = player.width / 2;
    });

    document.getElementById("rightBtn").addEventListener("mousedown", () => {
      player.x += player.speed;
      if (player.x > canvas.width - player.width / 2) player.x = canvas.width - player.width / 2;
    });

    // –ú—É–∑—ã–∫–∞
    bgMusic.volume = 0.2;
    bgMusic.play().catch(() => {
      alert("–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—É–∑—ã–∫—É.");
    });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–ø–ª–∏–∫–∏
    function showSpeechBubble(text) {
      speechBubble.textContent = text;
      speechBubble.style.opacity = 1;
      setTimeout(() => {
        speechBubble.style.opacity = 0;
      }, 2000);
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∫–æ—Ä–¥
    setInterval(() => {
      if (score > record) {
        record = score;
        localStorage.setItem("vanoRecord", record);
        scoreDisplay.textContent = `–í—ã–ø–∏—Ç–æ –±—É—Ç—ã–ª–æ–∫: ${score} | –†–µ–∫–æ—Ä–¥: ${record}`;
      }
    }, 1000);
  </script>
</body>
</html>
